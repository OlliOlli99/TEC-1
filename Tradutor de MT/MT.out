;DI translator setup
0 * * l wall#

move0 0 * r move0
move0 1 0 r move1
move0 _ 0 r moveB

move1 1 * r move1
move1 0 1 r move0
move1 _ 1 r moveB

moveB _ * * wall&
moveB 0 _ r move0
moveB 1 _ r move1

move# * * l move#
move# # * r 0o

wall# 0 # r move0
wall# 1 # r move1

wall& _ & l move#

;translator transitions:
;right movement transitions state 01
&01 * * * 01
&01 & _ r &01-moveB
&01-moveB _ & l 01

;right movement transitions state 02
&02 * * * 02
&02 & _ r &02-moveB
&02-moveB _ & l 02

;right movement transitions state 07
&07 * * * 07
&07 & _ r &07-moveB
&07-moveB _ & l 07

;right movement transitions state 04
&04 * * * 04
&04 & _ r &04-moveB
&04-moveB _ & l 04

;right movement transitions state 05
&05 * * * 05
&05 & _ r &05-moveB
&05-moveB _ & l 05

;right movement transitions state 06
&06 * * * 06
&06 & _ r &06-moveB
&06-moveB _ & l 06

;right movement transitions state 09
&09 * * * 09
&09 & _ r &09-moveB
&09-moveB _ & l 09

;right movement transitions state 10
&10 * * * 10
&10 & _ r &10-moveB
&10-moveB _ & l 10

;left movement transitions state 03
#03 * * * 03
#03 # * r #03-0
#03-0 0 _ r #03-move0
#03-0 1 _ r #03-move1
#03-0 _ _ r #03-moveB
;new move0 state 03
#03-move0 0 * r #03-move0
#03-move0 1 0 r #03-move1
#03-move0 _ 0 r #03-moveB
#03-move0 & 0 r #03-wall&
;new move1 state 03
#03-move1 1 * r #03-move1
#03-move1 0 1 r #03-move0
#03-move1 _ 1 r #03-moveB
#03-move1 & 1 r #03-wall&
;new moveB state 03
#03-moveB _ * r #03-moveB
#03-moveB 0 _ r #03-move0
#03-moveB 1 _ r #03-move1
#03-moveB & _ r #03-wall&
;new wall& state 03
#03-wall& _ & l #03-wall#
;new wall# state 03
#03-wall# * * l #03-wall#
#03-wall# _ * * 03

;left movement transitions state 08
#08 * * * 08
#08 # * r #08-0
#08-0 0 _ r #08-move0
#08-0 1 _ r #08-move1
#08-0 _ _ r #08-moveB
;new move0 state 08
#08-move0 0 * r #08-move0
#08-move0 1 0 r #08-move1
#08-move0 _ 0 r #08-moveB
#08-move0 & 0 r #08-wall&
;new move1 state 08
#08-move1 1 * r #08-move1
#08-move1 0 1 r #08-move0
#08-move1 _ 1 r #08-moveB
#08-move1 & 1 r #08-wall&
;new moveB state 08
#08-moveB _ * r #08-moveB
#08-moveB 0 _ r #08-move0
#08-moveB 1 _ r #08-move1
#08-moveB & _ r #08-wall&
;new wall& state 08
#08-wall& _ & l #08-wall#
;new wall# state 08
#08-wall# * * l #08-wall#
#08-wall# _ * * 08

;modified DI:
;S
;MT2
;Máquina que reconheça a linguagem {0^k1^m0^n | \exists k,m,n\in\mathbb{N} k+m<=n}

; ESTADO INICIAL ---> 00

0o 0 z r &01
0o 1 u r &02
01 0 0 r &01
01 _ _ r halt-accept
01 1 1 r &07
02 1 1 r &02
02 x x r &02
02 0 x l #03
03 1 1 l #03
03 x x l #03
03 u u r &04
04 1 u r &02
04 x x r &05
05 x x r &05
05 0 0 r &06
05 _ _ r halt-accept
06 0 0 r &06
06 _ _ r halt-accept
07 1 1 r &07
07 x x r &07
07 0 x l #08
08 0 0 l #08
08 1 1 l #08
08 x x l #08
08 z z r &09
09 0 z r &10
09 1 u r &02
10 0 0 r &10
10 1 1 r &07
